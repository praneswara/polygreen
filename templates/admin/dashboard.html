{% extends "admin/base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">Dashboard</h2>

<div class="row box">
  <div class="col-md-4">
    <div class="card text-center card-style mb-3"  style="background: linear-gradient(180deg, white, #a8ffe8);border: 2px solid black;">
      <div class="card-body d-flex justify-content-center align-items-center flex-column">
         <img src="{{ url_for('static', filename='users.png')}}" 
               alt="admin image" width="70" height="70" class="mb-2">
        <h5 class="card-title">Total Users</h5>
        <p class="display-4 fw-semibold  counter"  data-target="{{ stats.total_users }}">0</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card  text-center  card-style mb-3" style="background: linear-gradient(180deg, white, #a8ffe8);border: 2px solid black;">
           
      <div class="card-body d-flex justify-content-center align-items-center flex-column">
           <img src="{{ url_for('static', filename='vending-machine.png')}}" 
               alt="admin image" width="70" height="70"class="mb-3" >
        <h5 class="card-title">Total Machines</h5>
        <p class="display-4 fw-semibold  counter"   data-target="{{ stats.total_machines }}">0</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card  text-center card-style mb-3" style="background: linear-gradient(180deg, white, #a8ffe8);border: 2px solid black;">
             
      <div class="card-body d-flex justify-content-center align-items-center flex-column">
         <img src="{{ url_for('static', filename='transaction.png')}}" 
               alt="admin image" width="60" height="60" class="mb-3">
        <h5 class="card-title">Total Transactions</h5>
        <p class="display-4 fw-semibold counter"  data-target="{{ stats.total_transactions }}">0</p>
      </div>
    </div>
  </div>
</div>

<script>
  // Function to animate counters
  const counters = document.querySelectorAll('.counter');
  const speed = 100; // smaller = faster

  counters.forEach(counter => {
    const animate = () => {
      const value = +counter.getAttribute('data-target');
      const data = +counter.innerText;

      const increment = value / speed;

      if (data < value) {
        counter.innerText = Math.ceil(data + increment);
        setTimeout(animate, 80);
      } else {
        counter.innerText = value;
      }
    };

    animate();
  });
</script>
{% endblock %}
